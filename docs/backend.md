# Backend

## 공부자료
- [x] [웹 프로그래밍(BE파트부분)](https://www.boostcourse.org/web316/joinLectures/12943)

## 개요

웹 개발이 좋은데.. 굳이 프런트 벡엔드를 나눠서 좋은 것이 아니기 때문에.. 공부를 시작하기로 결정 (마침.. 부스트캠프 AI Tech도 일주일 방학이라)

### 웹의 동작 (HTTP 프로토콜 이해)

- 인터넷 != WWW
  - WWW - HTTP - 80 - 웹서비스
  - Email - SMTP/POP3/IMAP - 25/110/114 - 이메일 서비스
  - FTP - FTP - 21 - 파일 전송 서비스
  - DNS - TCP/UDP - 53 - 네임서비스
  - NEWS - NNTP - 119 - 인터넷 뉴스 서비스

#### HTTP (Hypertext Transfer Protocol)란?

- HTTP는 서버와 클라이언트가 인터넷상에서 데이터를 주고받기 위한 프로토콜(protocol)입니다.

#### HTTP 작동방식

1. 클라이언트가 서버에 요청
2. 서버가 응답

- 특징: stateless
  - 요청/응답 후, 서버가 클라이언트의 이전상황을 알 수 없음
  - cookie를 통해 정보 유지

#### URL (Uniform Resource Locator)

- 인터넷 상의 자원의 위치
- 특정 웹 서버의 특정 파일에 접근하기 위한 경로 혹은 주소

#### HTTP

- 요청 메서드 : GET, PUT, POST, PUSH, OPTIONS 등의 요청 방식이 온다.
- 요청 URI : 요청하는 자원의 위치를 명시한다.
- HTTP 프로토콜 버전 : 웹 브라우저가 사용하는 프로토콜 버전이다.

첫번째 줄의 요청메소드는 서버에게 요청의 종류를 알려주기 위해서 사용됩니다.

각각의 메소드 이름은 다음과 같은 의미를 가집니다. (참고로 최초의 웹 서버는 GET방식만 지원해줬습니다.)

- GET : 정보를 요청하기 위해서 사용한다. (SELECT)
- POST : 정보를 밀어넣기 위해서 사용한다. (INSERT)
- PUT : 정보를 업데이트하기 위해서 사용한다. (UPDATE)
- DELETE : 정보를 삭제하기 위해서 사용한다. (DELETE)
- HEAD : (HTTP)헤더 정보만 요청한다. 해당 자원이 존재하는지 혹은 서버에 문제가 없는지를 확인하기 위해서 사용한다.
- OPTIONS : 웹서버가 지원하는 메서드의 종류를 요청한다.
- TRACE : 클라이언트의 요청을 그대로 반환한다. 예컨데 echo 서비스로 서버 상태를 확인하기 위한 목적으로 주로 사용한다.

#### 생각해보기: HTTP에 S가 붙은 HTTPS 는 어떤 용도로 사용되는 건가요? HTTP와 무엇이 다른가요?

- HTTPS (HyperText Transfer Protocol Secure)
- http가 클라이언트와 서버가 통신할 때 평문 전송을 하여 악의적인 사용자가 도청을 할 수 있다는 취약점을 제거하기 위해 SSL / TLS를 사용하여 평문이 아닌 암호화를 전송하는 프로토콜
- SSL / TLS는 인증서를 통해 클라이언트와 서버를 서로 인증을 하고, handshake를 통해 암호화 등을 협상하는 단계 등이 있는데, 신뢰 받은 기관에서 받은 인증서를 통해 해당 웹 페이지가 안전하다는 것 또한 보장할 수 있음

### 웹 Front-End 와 웹 Back-End-1

#### 웹프론트엔드

- 사용자에게 웹을 통해 다양한 콘텐츠(문서, 동영상, 사진 등)를 제공합니다. 
- 또한, 사용자의 요청(요구사항)에 반응해서 동작합니다.

#### 웹프론트엔드의 역할

- 웹콘텐츠를 잘 보여주기 위해 구조를 만들어야 합니다.(신문,책등과 같이) - HTML
- 적절한 배치와 일관된 디자인 등을 제공해야 합니다.(보기 좋게) - CSS
- 사용자 요청을 잘 반영해야 합니다.(소통하듯이) - Javascript

### 웹 Front-End 와 웹 Back-End-2

#### 백 엔드(Back-End)란?

- backend는 정보를 처리하고 저장하며, 요청에 따라 정보를 내려주는 역할을 한다. 가령 쇼핑몰이라면, 상품 정보를 가지고 있고, 주문을 받아서 저장하고, 사용자가 관심있어 하는 상품을 골라주는 역할이 back-End의 역할이다

### browser의 동작

- [브라우저 동작](https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#The_browser_high_level_structure)

- [브라우저 동작2](https://m.post.naver.com/viewer/postView.nhn?volumeNo=8431285&memberNo=34176766)

- main flow

1. parsing HTML to construct the DOM tree
2. Render tree construction
3. Layout of the render tree (스타일 정보와 구조를 합쳐서 매칭)
4. Painting the render tree

- HTML을 해석해서 DOM Tree를 만들고, CSS를 해석해서 역시 CSS Tree(CSS Object Model)을 만듭니다.  이 과정에서 Parsing 과정이 필요하며 토큰 단위로 해석되는 방식은 일반적인 소스코드의 컴파일 과정이라고 보시면 됩니다. DOM Tree와 CSS Tree, 이 두 개는 연관되어 있으므로 Render Tree로 다시 조합됩니다. 이렇게 조합된 결과는 화면에 어떻게 배치할지 크기와 위치 정보를 담고 있습니다. 이후에 이렇게 구성된 Render Tree정보를 통해서 화면에 어떤 부분에 어떻게 색칠을 할지 Painting과정을 거치게 됩니다.

#### 생각해보기: 우리가 흔히 브라우저 탐색을 할 때 스크롤을 하거나, 어떤 것을 클릭하면서 화면의 위치를 바꿀 때, 브라우저는 어떻게 다시 화면을 그릴까요? 위에서 표현된 그림처럼 다시 렌더링 되지 않을까요? 

- 스크롤 등의 작업이나 클릭을 통한 화면의 위치가 바뀔 경우, repainting이 발생하여 리소스 낭비를 줄임. 즉, 다시 렌더링 되지않고 repainting.
- **렌더링 최적화**
  - Reflow: Render Tree(스타일 정보와 실제 화면에 표현되는 노드들로만 구성)와 각 요소들의 크기와 위치를 다시 계산
    - Reflow 예시)
      \- 페이지 초기 렌더링 시(최초 Layout 과정)
      \- 윈도우 리사이징 시 (Viewport 크기 변경시)
      \- 노드 추가 또는 제거
      \- 요소의 위치, 크기 변경 (left, top, margin, padding, border, width, height, 등..)
      \- 폰트 변경 과(텍스트 내용) 이미지 크기 변경(크기가 다른 이미지로 변경 시)
  - Repaint: Render Tree를 다시 화면에 그려주는 과정
    - Repaint 예시)
      \- 레이아웃에 영향을 주지 않는 스타일 속성이 변했을 경우

### browser에서의 웹 개발

- option + command + i
- HTML문서는 html이라는 태그로 시작해서 html태그로 끝납니다.

- head는 무엇을 하는 걸까요? 

  - HTML 문성에 대한 추가적인 설명을 담고 있다 (문서에 대한 정보)

  - <meta>: 문서에 대한 정보

- body는 무엇을 하는 걸까요?

  - 화면에 표현되어야 될 div나 다양한 태그들 포함ㄴ

- HTML은 계층적입니다.

- HTML은 tag를 사용해서 표현합니다.

- **JavaScript 코드는 body 태그 닫히기 전에 위치하는 것이 렌더링을 방해하지 않아도 좋고, css코드는 head 안에 위치해서 렌더링 처리 시에 브라우저가 더 빨리 참고할 수 있게 하는 것이 좋습니다**

### 웹서버

#### 웹 서버란?

- 웹 서버는 소프트웨어(Software)를 보통 말하지만, 웹 서버 소프트웨어가 동작하는 컴퓨터를 말합니다.
- 웹 서버의 가장 중요한 기능은 클라이언트(Client)가 요청하는 HTML 문서나 각종 리소스(Resource)를 전달하는 것입니다.
  - 보통 client = 웹 브라우저
- 웹 브라우저나 웹 크롤러가 요청하는 리소스는 컴퓨터에 저장된 정적(static)인 데이터이거나 동적인 결과가 될 수 있습니다.
  - 정적인 데이터: 이미지, HTML 파일, CSS 파일, JavaScript 파일
  - 동적인 데이터: 웹 서버에 의해서 실행되는 프로그램을 통해서 만들어진 결과
  - 웹 크롤러: 네이버나 구글 같은 검색 사이트에서 다른 웹사이트 정보를 읽어갈 때 사용하는 소프트웨어를 이야기합니다.

#### 웹 서버 소프트웨어의 종류

- 가장 많이 사용하는 웹 서버는 Apache, Nginx, Microsoft IIS
- Apache웹 서버는 Apache Software Foundation에서 개발한 웹서버로 오픈소스 소프트웨어(Open-source Software)이며, 거의 대부분 운영체제에서 설치 및 사용을 할 수 있습니다.
- Nginx는 차세대 웹서버로 불리며 더 적은 자원으로 더 빠르게 데이터를 서비스하는 것을 목적으로 만들어진 서버이며 Apache웹 서버와 마찬가지로 오픈소스 소프트웨어입니다.

### WAS (Web Application Server)

#### 클라이언트/서버 구조

- 클라이언트(Client)는 서비스(Service)를 제공하는 서버(Server)에게 정보를 요청하여 응답 받은 결과를 사용합니다.

#### DBMS (DataBase Management System)

- 다수의 사용자가 데이터베이스 내의 데이터에 접근할 수 있도록 해주는 소프트웨어입니다.

#### 미들웨어 (MiddleWare)

- 클라이언트 쪽에 비즈니스 로직이 많을 경우, 클라이언트 관리(배포 등)로 인해 비용이 많이 발생하는 문제가 있습니다.

- 비즈니스 로직을 클라이언트와 DBMS사이의 미들웨어 서버에서 동작하도록 함으로써 클라이언트는 입력과 출력만 담당하도록 합니다.

#### WAS (Web Application Server)

- WAS는 일종의 미들웨어로 웹 클라이언트(보통 웹 브라우저)의 요청 중 웹 애플리케이션이 동작하도록 지원하는 목적을 가집니다.

#### 웹 서버 vs WAS

- WAS도 보통 자체적으로 웹 서버 기능을 내장하고 있습니다.
- 현재는 WAS가 가지고 있는 웹 서버도 정적인 콘텐츠를 처리하는 데 있어서 성능상 큰 차이가 없습니다.
- 규모가 커질수록 웹 서버와 WAS를 분리합니다.
- 자원 이용의 효율성 및 장애 극복, 배포 및 유지보수의 편의성을 위해 웹서버와 WAS를 대체로 분리합니다.
  - WAS 자체에 문제가 발생하는 경우도 있습니다. 이 경우, WAS를 재시작해야 되는 경우가 생기는데요. 문제가 있는 WAS를 재시작할 때, 앞단의 웹 서버에서 먼저 해당 WAS를 이용하지 못하도록 하고. WAS를 재시작한다면 해당 웹 애플리케이션을 사용하는 사람은 WAS의 문제가 발생하였는지를 모르고 이용할 수 있을 거예요. 이러한 처리를 **장애 극복 기능**이라고 하는데요. 대용량 웹 애플리케이션에는 무중단으로 운영하기 위해서 상당히 중요한 기능이에요. 이러한 기능 때문에 보통 웹 서버가 WAS 앞단에서 동작하도록 하는 경우가 많답니다.

#### 생각해보기: 톰켓 버전별 차이저멩 대해서 알아보세요

- 톰캣 9.x
  Servlet 4.0, JSP 2.3, EL 3.0, WebSocket 1.1 및 JASPIC 1.1 (Java EE 8 플랫폼에 필요한 버전) 을 구현

- 톰캣 8.x
  Servlet 3.1, JSP 2.3, EL 3.0, WebSocket 1.1 구현

- 톰캣 7.x
  Servlet 3.0, JSP 2.2, El 2.2 및 WebSocekt 1.1 구현
- 톰캣 버전별 지원하는 자바의 버전과 서블릿 스펙이 다르기 때문에 개발 환경에 맞춰서 톰캣 버전을 선택하는 것이 중요